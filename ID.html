            <style>
            /* Toast notification */
            #toastNoti {
                visibility: hidden;
                min-width: 220px;
                background: #25D366;
                color: #fff;
                text-align: center;
                border-radius: 8px;
                padding: 14px 24px;
                position: fixed;
                z-index: 5000;
                left: 50%;
                bottom: 80px;
                font-size: 1.1em;
                transform: translateX(-50%);
                box-shadow: 0 2px 12px #0003;
                opacity: 0;
                transition: opacity 0.4s, visibility 0.4s;
            }
            #toastNoti.show {
                visibility: visible;
                opacity: 1;
            }
            </style>
            <!-- Ejemplo de notificaci√≥n tipo toast -->
            <div id="toastNoti">üéâ ¬°Ejemplo de notificaci√≥n de cumplea√±os!</div>
        <style>
        /* Animaci√≥n de pulso para el bot√≥n de cumplea√±os */
        @keyframes cumple-pulse {
            0% { box-shadow: 0 0 0 0 #25d36688; }
            70% { box-shadow: 0 0 0 16px #25d36600; }
            100% { box-shadow: 0 0 0 0 #25d36600; }
        }
        .cumple-anim {
            animation: cumple-pulse 1.2s infinite;
        }
        </style>
    <!-- Bot√≥n Compartir recreado din√°micamente -->
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Insertar el bot√≥n Compartir en la barra de acciones si no existe
            var actionsBar = document.querySelector('.id-actions-bar');
            if (actionsBar && !document.getElementById('btnCompartir')) {
                var btn = document.createElement('button');
                btn.id = 'btnCompartir';
                btn.title = typeof t === 'function' ? (t('compartir') || 'Compartir') : 'Compartir';
                btn.innerHTML = '<i class="fa-solid fa-share-nodes"></i>';
                btn.style.background = '#25D366';
                btn.style.color = '#fff';
                btn.style.padding = '10px 14px';
                btn.style.borderRadius = '50%';
                btn.style.fontSize = '1.3em';
                btn.style.boxShadow = '0 2px 6px rgba(0,0,0,0.10)';
                btn.style.border = 'none';
                btn.style.cursor = 'pointer';
                btn.style.transition = 'background 0.2s';
                // Insertar en la posici√≥n original (despu√©s de btnTema)
                var btnTema = document.getElementById('btnTema');
                if (btnTema && btnTema.nextSibling) {
                    actionsBar.insertBefore(btn, btnTema.nextSibling);
                } else {
                    actionsBar.appendChild(btn);
                }
                // Evento compartir
                btn.addEventListener('click', function() {
                    const data = JSON.parse(localStorage.getItem('profileData') || '{}');
                    let texto = '';
                    if(data.nombre) texto += (typeof t === 'function' ? t('nombre') : 'Nombre') + ': ' + data.nombre + '\n';
                    if(data.empresa) texto += (typeof t === 'function' ? t('empresa') : 'Empresa') + ': ' + data.empresa + '\n';
                    if(data.cargo) texto += (typeof t === 'function' ? t('cargo') : 'Cargo') + ': ' + data.cargo + '\n';
                    if(data.telefono) texto += (typeof t === 'function' ? t('telefono') : 'Tel√©fono') + ': ' + data.telefono + '\n';
                    if(data.email) texto += (typeof t === 'function' ? t('email') : 'Correo electr√≥nico') + ': ' + data.email + '\n';
                    if(data.whatsapp) texto += (typeof t === 'function' ? t('whatsapp') : 'Whatsapp') + ': ' + data.whatsapp + '\n';
                    if(data.facebook) texto += (typeof t === 'function' ? t('facebook') : 'Facebook') + ': ' + data.facebook + '\n';
                    if(data.instagram) texto += (typeof t === 'function' ? t('instagram') : 'Instagram') + ': ' + data.instagram + '\n';
                    if(data.linkedin) texto += (typeof t === 'function' ? t('linkedin') : 'LinkedIn') + ': ' + data.linkedin + '\n';
                    if (navigator.share) {
                        navigator.share({
                            title: (typeof t === 'function' ? t('mi_tarjeta_contacto') : 'Mi tarjeta de contacto') || 'Mi tarjeta de contacto',
                            text: texto,
                            url: window.location.href
                        }).catch(()=>{});
                    } else {
                        var modal = document.getElementById('modalCompartir');
                        var content = document.getElementById('modalCompartirContent');
                        document.getElementById('txtDatosCompartir').value = texto;
                        modal.style.display = 'flex';
                        modal.style.alignItems = 'center';
                        modal.style.justifyContent = 'center';
                        if(content) content.focus();
                    }
                });
            }
        });
        </script>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID con QR y Redes</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
                body.modo-oscuro {
                    background: linear-gradient(135deg, #181c24 0%, #23272f 100%) !important;
                    color: #e0e6ef !important;
                }
                .modo-oscuro .id-card {
                    background: #23272f !important;
                    color: #e0e6ef !important;
                    box-shadow: 0 4px 24px #0008;
                }
                .modo-oscuro .id-title,
                .modo-oscuro .id-cargo {
                    color: #7ecfff !important;
                }
                .modo-oscuro .id-name {
                    color: #fff !important;
                }
                .modo-oscuro .id-social-section a {
                    background: #23272f !important;
                    color: #7ecfff !important;
                    box-shadow: 0 1px 4px #0005;
                }
                .modo-oscuro .id-social-section a:hover {
                    background: #2176d2 !important;
                    color: #fff !important;
                }
                .modo-oscuro .id-actions-bar a,
                .modo-oscuro .id-actions-bar button {
                    background: #23272f !important;
                    color: #7ecfff !important;
                    box-shadow: 0 2px 8px #0007;
                    border: 1.5px solid #333 !important;
                }
                .modo-oscuro .id-actions-bar a[title="Editar"] {
                    background: #2176d2 !important;
                    color: #fff !important;
                }
                .modo-oscuro .id-actions-bar button[title="Compartir"] {
                    background: #25D366 !important;
                    color: #fff !important;
                }
                .modo-oscuro .id-actions-bar button[title="Contacto"] {
                    background: #2196F3 !important;
                    color: #fff !important;
                }
                .modo-oscuro .id-actions-bar a[title="Editar"]:hover,
                .modo-oscuro .id-actions-bar button[title="Compartir"]:hover,
                .modo-oscuro .id-actions-bar button[title="Contacto"]:hover {
                    background: #111 !important;
                }
                .modo-oscuro .id-card-container {
                    background: none !important;
                }
                .modo-oscuro .id-photo-section img {
                    box-shadow: 0 2px 12px #000a;
                }
                .modo-oscuro #modalGuiaRapida > div,
                .modo-oscuro #modalCompartirContent,
                .modo-oscuro #modalCumpleContent,
                .modo-oscuro #modalColorContent {
                    background: #23272f !important;
                    color: #e0e6ef !important;
                    box-shadow: 0 8px 32px #000a;
                }
                .modo-oscuro input,
                .modo-oscuro textarea {
                    background: #23272f !important;
                    color: #e0e6ef !important;
                    border: 1.5px solid #444 !important;
                }
                .modo-oscuro ::placeholder {
                    color: #b0b8c9 !important;
                }
                .modo-oscuro .id-qr-section {
                    background: none !important;
                }
                .modo-oscuro .id-header {
                    background: none !important;
                }
        body {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2176d2 0%, #25D366 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        .id-card-container {
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 32px;
        }
        .id-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px #0002;
            padding: 28px 18px 22px 18px;
            max-width: 370px;
            width: 95vw;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .id-header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .id-title {
            font-size: 1.25em;
            font-weight: bold;
            color: #2176d2;
        }
        .id-info {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 18px;
        }
        .id-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }
        .id-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #222;
        }
        .id-cargo {
            font-size: 1em;
            color: #2176d2;
        }
        .id-photo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 12px;
        }
        .id-photo-section img {
            box-shadow: 0 2px 8px #0001;
            object-fit: cover;
            aspect-ratio: 1/1;
            image-rendering: auto;
            width: 140px !important;
            height: 140px !important;
            border-radius: 20px !important;
        }
        .id-qr-section {
            margin: 48px 0 0 0;
            display: flex;
            justify-content: center;
        }
        .id-social-section {
            display: flex;
            justify-content: center;
            gap: 18px;
            margin-top: 48px;
        }
        .id-social-section a {
            background: #f4f4f4;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            box-shadow: 0 1px 4px #0001;
            transition: background 0.2s, color 0.2s;
        }
        .id-social-section a:hover {
            background: #2176d2;
            color: #fff !important;
        }
        @media (max-width: 480px) {
            .id-card { padding: 16px 4vw 16px 4vw; }
            .id-title { font-size: 1.05em; }
            .id-name { font-size: 1em; }
        }
        .id-actions-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 370px;
            width: 95vw;
            margin: 0 auto;
            padding-top: 18px;
            gap: 8px;
        }
        .id-actions-bar a, .id-actions-bar button {
            background: #2176d2;
            color: #fff;
            padding: 10px 14px;
            border-radius: 50%;
            text-decoration: none;
            font-size: 1.3em;
            box-shadow: 0 2px 6px rgba(0,0,0,0.10);
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .id-actions-bar a[title="Editar"] { background: #2176d2; }
        .id-actions-bar button[title="Compartir"] { background: #25D366; }
        .id-actions-bar button[title="Contacto"] { background: #2196F3; }
        .id-actions-bar a[title="Editar"]:hover, .id-actions-bar button[title="Compartir"]:hover, .id-actions-bar button[title="Contacto"]:hover {
            background: #111;
        }
    </style>
</head>
<body>
    <div class="id-actions-bar">
        <a href="Formulario de perfil.html" id="btnEditar" title="Editar"><i class="fa-solid fa-pen-to-square"></i></a>
        <button id="btnTema" title="Cambiar tema"><i class="fa-solid fa-palette"></i></button>
        <!-- Bot√≥n Compartir ser√° recreado abajo -->
        <button id="btnOscuro" title="Modo oscuro"><i class="fa-solid fa-moon"></i></button>
        <button id="btnVerContacto" title="Contacto"><i class="fa-solid fa-address-book"></i></button>
        <button id="btnGuiaRapida" title="Gu√≠a r√°pida" style="background:#FFC107;color:#fff;"><i class="fa-solid fa-circle-info"></i></button>
                    <!-- Modal Gu√≠a R√°pida -->
                    <div id="modalGuiaRapida" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:5000;align-items:center;justify-content:center;">
                        <div style="background:#fff;padding:32px 24px 24px 24px;border-radius:18px;box-shadow:0 8px 32px #0003;max-width:90vw;width:340px;text-align:left;position:relative;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:2em;color:#FFC107;margin-bottom:10px;"><i class='fa-solid fa-circle-info'></i></div>
                            <div id="txtGuiaRapida" style="font-size:1.05em;line-height:1.5;margin-bottom:18px;text-align:left;max-height:320px;overflow:auto;"></div>
                            <button id="btnCerrarGuiaRapida" style="background:#bbb;color:#333;padding:10px 22px;border:none;border-radius:8px;font-size:1em;cursor:pointer;">Cerrar</button>
                        </div>
                    </div>
                    <script>
                    // Gu√≠a r√°pida multiling√ºe
                    function getGuiaRapida(lang) {
                        switch(lang) {
                            case 'en':
                                return `
            1. <b>Select your language</b> on the welcome screen. Everything translates automatically.<br><br>
            2. <b>Create or edit your profile</b> with your data, photo, and logo. Use the pencil button to edit.<br><br>
            3. <b>Share your card</b> with the share button:<br>
            &nbsp;&nbsp;- On mobile: use the native menu (WhatsApp, Email, etc.).<br>
            &nbsp;&nbsp;- On PC: copy and paste the data from the modal.<br><br>
            4. <b>Manage your contacts</b> from the agenda:<br>
            &nbsp;&nbsp;- Add, edit, delete, and search contacts.<br>
            &nbsp;&nbsp;- Import from your mobile or export to CSV.<br><br>
            5. <b>Customize colors and dark mode</b> with the top bar buttons.<br><br>
            6. <b>Get birthday notifications</b> for your contacts and congratulate them quickly.<br><br>
            Done! Your identity and contacts always at hand, easy to share and multilingual.`;
                            case 'fr':
                                return `
            1. <b>S√©lectionnez votre langue</b> sur l'√©cran d'accueil. Tout est traduit automatiquement.<br><br>
            2. <b>Cr√©ez ou modifiez votre profil</b> avec vos donn√©es, photo et logo. Utilisez le bouton crayon pour modifier.<br><br>
            3. <b>Partagez votre carte</b> avec le bouton de partage :<br>
            &nbsp;&nbsp;- Sur mobile : utilisez le menu natif (WhatsApp, Email, etc.).<br>
            &nbsp;&nbsp;- Sur PC : copiez et collez les donn√©es depuis la fen√™tre.<br><br>
            4. <b>G√©rez vos contacts</b> depuis l'agenda :<br>
            &nbsp;&nbsp;- Ajoutez, modifiez, supprimez et recherchez des contacts.<br>
            &nbsp;&nbsp;- Importez depuis votre mobile ou exportez en CSV.<br><br>
            5. <b>Personnalisez les couleurs et le mode sombre</b> avec les boutons de la barre sup√©rieure.<br><br>
            6. <b>Recevez des notifications d'anniversaire</b> de vos contacts et f√©licitez-les rapidement.<br><br>
            Pr√™t ! Votre identit√© et vos contacts toujours √† port√©e de main, facile √† partager et multilingue.`;
                            default:
                                return `
            1. <b>Selecciona tu idioma</b> en la pantalla de inicio. Todo se traduce autom√°ticamente.<br><br>
            2. <b>Crea o edita tu perfil</b> con tus datos, foto y logo. Usa el bot√≥n de l√°piz para editar.<br><br>
            3. <b>Comparte tu tarjeta</b> con el bot√≥n de compartir:<br>
            &nbsp;&nbsp;- En m√≥vil: usa el men√∫ nativo (WhatsApp, Email, etc.).<br>
            &nbsp;&nbsp;- En PC: copia y pega los datos desde el modal.<br><br>
            4. <b>Gestiona tus contactos</b> desde la agenda:<br>
            &nbsp;&nbsp;- Agrega, edita, elimina y busca contactos.<br>
            &nbsp;&nbsp;- Importa desde tu m√≥vil o exporta a CSV.<br><br>
            5. <b>Personaliza colores y modo oscuro</b> con los botones de la barra superior.<br><br>
            6. <b>Recibe avisos de cumplea√±os</b> de tus contactos y felic√≠talos r√°pido.<br><br>
            ¬°Listo! Tu identidad y contactos siempre a mano, f√°cil de compartir y multiling√ºe.`;
                        }
                    }
                    document.addEventListener('DOMContentLoaded', function() {
                        var btnGuia = document.getElementById('btnGuiaRapida');
                        var modalGuia = document.getElementById('modalGuiaRapida');
                        var txtGuia = document.getElementById('txtGuiaRapida');
                        var btnCerrarGuia = document.getElementById('btnCerrarGuiaRapida');
                        function mostrarGuia() {
                            var lang = (typeof getLang === 'function') ? getLang() : 'es';
                            txtGuia.innerHTML = getGuiaRapida(lang);
                            modalGuia.style.display = 'flex';
                            modalGuia.style.alignItems = 'center';
                            modalGuia.style.justifyContent = 'center';
                        }
                        if(btnGuia && modalGuia && txtGuia && btnCerrarGuia) {
                            btnGuia.onclick = mostrarGuia;
                            btnCerrarGuia.onclick = function() {
                                modalGuia.style.display = 'none';
                            };
                        }
                        // Sincronizar gu√≠a si cambia el idioma global
                        window.addEventListener('storage', function(e) {
                            if(e.key === 'lang') setTimeout(function(){
                                if(modalGuia.style.display === 'flex') mostrarGuia();
                            }, 100);
                        });
                    });
                    </script>
            <!-- Modal para seleccionar colores -->
            <div id="colorModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0008;z-index:1000;align-items:center;justify-content:center;">
                <div style="background:#fff;padding:24px 18px;border-radius:12px;box-shadow:0 2px 12px #0003;display:flex;flex-direction:column;align-items:center;gap:16px;min-width:220px;">
                    <label style="font-weight:bold;">Color 1: <input type="color" id="color1" value="#2176d2"></label>
                    <label style="font-weight:bold;">Color 2: <input type="color" id="color2" value="#25D366"></label>
                    <div style="display:flex;gap:12px;">
                        <button id="guardarColores" style="background:#25D366;color:#fff;padding:8px 18px;border:none;border-radius:6px;cursor:pointer;font-weight:bold;">Guardar</button>
                        <button id="cerrarColores" style="background:#aaa;color:#fff;padding:8px 18px;border:none;border-radius:6px;cursor:pointer;font-weight:bold;">Cerrar</button>
                    </div>
                </div>
            </div>
    </div>
    <div class="id-card-container">
        <div class="id-card">
            <div class="id-header">
                <span class="id-title" id="empresa"></span>
                <img id="logo" src="#" alt="Logo" style="height:40px;max-width:60px;display:none;background:#fff;border-radius:8px;"/>
                <button id="btnConfig" title="Configuraci√≥n" style="background:#2176d2;color:#fff;border:none;border-radius:50%;width:36px;height:36px;font-size:1.2em;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:8px;">
                    <i class="fa fa-cog"></i>
                </button>
            </div>
            <div class="id-info">
                <div class="id-details">
                    <div class="id-name" id="nombre" style="display:none;"></div>
                    <div class="id-cargo" id="cargo" style="display:none;"></div>
                </div>
                <div class="id-photo-section">
                    <img id="foto" src="#" alt="Foto de perfil" style="width:70px;height:70px;border-radius:10px;object-fit:cover;border:2px solid #fff;display:none;">
                </div>
            </div>
            <div class="id-qr-section">
                <img id="qr" src="#" alt="QR Code" style="background:#fff;padding:8px;border-radius:12px;width:180px;height:180px;">
            </div>
            <div class="id-social-section" style="display:flex;justify-content:center;gap:18px;margin-top:48px;">
                <a id="whatsapp" href="#" target="_blank" title="Whatsapp" style="color:#25D366;font-size:1.6em;display:none;"><i class="fab fa-whatsapp"></i></a>
                <a id="telefono" href="#" target="_blank" title="Tel√©fono" style="color:#2196F3;font-size:1.6em;display:none;"><i class="fas fa-phone"></i></a>
                <a id="email" href="#" target="_blank" title="Email" style="color:#FF9800;font-size:1.6em;display:none;"><i class="fas fa-envelope"></i></a>
                <a id="facebook" href="#" target="_blank" title="Facebook" style="color:#1877F3;font-size:1.6em;display:none;"><i class="fab fa-facebook"></i></a>
                <a id="instagram" href="#" target="_blank" title="Instagram" style="color:#E4405F;font-size:1.6em;display:none;"><i class="fab fa-instagram"></i></a>
                <a id="linkedin" href="#" target="_blank" title="LinkedIn" style="color:#0A66C2;font-size:1.6em;display:none;"><i class="fab fa-linkedin"></i></a>
            </div>
            <!-- Modal para compartir manualmente -->
            <div id="modalCompartir" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:4000;align-items:center;justify-content:center;">
                <div id="modalCompartirContent" style="background:#fff;padding:32px 24px 24px 24px;border-radius:18px;box-shadow:0 8px 32px #0003;max-width:90vw;width:340px;text-align:center;position:relative;display:flex;flex-direction:column;align-items:center;">
                    <div style="font-size:2em;color:#2176d2;margin-bottom:10px;"><i class='fa-solid fa-share-nodes'></i></div>
                    <div style="font-size:1.1em;margin-bottom:12px;" id="txtCompartirManual">Puedes copiar y compartir estos datos:</div>
                    <textarea id="txtDatosCompartir" style="width:95%;height:120px;resize:none;font-size:1em;margin-bottom:12px;"></textarea>
                    <button id="btnCerrarCompartir" style="background:#bbb;color:#333;padding:10px 22px;border:none;border-radius:8px;font-size:1em;cursor:pointer;"><script>document.write(typeof t==='function'?t('cerrar'):'Cerrar')</script></button>
                </div>
            </div>
            <!-- Modal de cumplea√±os -->
            <div id="modalCumple" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:3000;align-items:center;justify-content:center;">
                <div style="background:#fff;padding:32px 24px 24px 24px;border-radius:18px;box-shadow:0 8px 32px #0003;max-width:90vw;width:340px;text-align:center;position:relative;">
                    <div style="font-size:2.5em;color:#25D366;margin-bottom:10px;"><i class='fa-solid fa-cake-candles'></i></div>
                    <div id="msgCumple" style="font-size:1.15em;margin-bottom:22px;"></div>
                    <button id="cerrarModalCumple" style="background:#bbb;color:#333;padding:10px 22px;border:none;border-radius:8px;font-size:1em;cursor:pointer;margin-top:18px;">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bot√≥n flotante de cumplea√±os SIEMPRE visible -->
    <div id="btnCumpleFloating" style="display:flex;position:fixed;bottom:32px;left:24px;z-index:3500;width:64px;height:64px;background:linear-gradient(135deg,#25D366 60%,#43e97b 100%);border-radius:50%;box-shadow:0 4px 18px #25d36655,0 1.5px 8px #0002;align-items:center;justify-content:center;cursor:pointer;transition:box-shadow 0.2s;">
        <i class="fa-solid fa-cake-candles" style="color:#fff;font-size:2.2em;"></i>
        <div id="toastNotiContactos" style="visibility:hidden;min-width:180px;background:#25D366;color:#fff;text-align:center;border-radius:8px;padding:8px 16px;position:absolute;z-index:3600;left:50%;bottom:80px;font-size:0.98em;transform:translateX(-50%);box-shadow:0 2px 12px #0003;opacity:0;transition:opacity 0.4s,visibility 0.4s;"></div>
    </div>
        </div>
    </div>
    <script>
                                // Traducci√≥n din√°mica de los botones del modal de color
                                function traducirModalColores() {
                                    var btnGuardar = document.getElementById('guardarColores');
                                    var btnCerrar = document.getElementById('cerrarColores');
                                    if(btnGuardar) btnGuardar.textContent = t('guardar') || 'Guardar';
                                    if(btnCerrar) btnCerrar.textContent = t('cerrar') || 'Cerrar';
                                }
                                document.addEventListener('DOMContentLoaded', function() {
                                    traducirModalColores();
                                    window.addEventListener('storage', function(e) {
                                        if(e.key === 'lang') {
                                            setTimeout(traducirModalColores, 100);
                                        }
                                    });
                                });
                            // Traducci√≥n din√°mica de t√≠tulos de botones y textos
                            function traducirID() {
                                document.getElementById('btnEditar').title = t('editar');
                                document.getElementById('btnTema').title = t('cambiar_tema') || 'Cambiar tema';
                                document.getElementById('btnCompartir').title = t('compartir') || 'Compartir';
                                document.getElementById('btnOscuro').title = t('modo_oscuro') || 'Modo oscuro';
                                document.getElementById('btnVerContacto').title = t('contactos') || 'Contactos';
                                // Traducci√≥n de los iconos de redes sociales
                                var redes = [
                                    {id: 'whatsapp', key: 'whatsapp'},
                                    {id: 'telefono', key: 'telefono'},
                                    {id: 'email', key: 'email'},
                                    {id: 'facebook', key: 'facebook'},
                                    {id: 'instagram', key: 'instagram'},
                                    {id: 'linkedin', key: 'linkedin'}
                                ];
                                redes.forEach(function(r) {
                                    var el = document.getElementById(r.id);
                                    if (el) el.title = t(r.key);
                                });
                            }
                            function actualizarTooltipsRedes() {
                                var redes = [
                                    {id: 'whatsapp', key: 'whatsapp'},
                                    {id: 'telefono', key: 'telefono'},
                                    {id: 'email', key: 'email'},
                                    {id: 'facebook', key: 'facebook'},
                                    {id: 'instagram', key: 'instagram'},
                                    {id: 'linkedin', key: 'linkedin'}
                                ];
                                redes.forEach(function(r) {
                                    var el = document.getElementById(r.id);
                                    if (el) el.setAttribute('title', t(r.key));
                                });
                                // Traducir todos los botones de la barra de acciones
                                var btns = [
                                    {id: 'btnEditar', key: 'editar'},
                                    {id: 'btnTema', key: 'cambiar_tema'},
                                    {id: 'btnOscuro', key: 'modo_oscuro'},
                                    {id: 'btnVerContacto', key: 'contactos'},
                                    {id: 'btnGuiaRapida', key: 'guia_rapida'},
                                    {id: 'btnCompartir', key: 'compartir'}
                                ];
                                btns.forEach(function(b) {
                                    var el = document.getElementById(b.id);
                                    if (el) el.setAttribute('title', t(b.key) || el.getAttribute('title'));
                                });
                            }
                            document.addEventListener('DOMContentLoaded', function() {
                                traducirID();
                                actualizarTooltipsRedes();
                                // Observar cambios en la barra de acciones para traducir tooltips din√°micos
                                var actionsBar = document.querySelector('.id-actions-bar');
                                if (actionsBar) {
                                    var observer = new MutationObserver(function() {
                                        setTimeout(actualizarTooltipsRedes, 50);
                                    });
                                    observer.observe(actionsBar, { childList: true, subtree: true });
                                }
                                // Forzar traducci√≥n tras breve retardo para tooltips din√°micos
                                setTimeout(actualizarTooltipsRedes, 200);
                            });
                            // Actualizar tooltips de redes sociales al cambiar idioma
                            window.addEventListener('storage', function(e) {
                                if(e.key === 'lang') setTimeout(actualizarTooltipsRedes, 100);
                            });
                            // Exponer funci√≥n para forzar traducci√≥n desde otros scripts si es necesario
                            window.actualizarTooltipsRedes = actualizarTooltipsRedes;
                        // Mostrar modal de cumplea√±os si hoy es el cumplea√±os del usuario
                        function activarBotonCumple() {
                            try {
                                const data = JSON.parse(localStorage.getItem('profileData') || '{}');
                                var btnCumple = document.getElementById('btnCumpleFloating');
                                var modalCumple = document.getElementById('modalCumple');
                                var cerrarModalCumple = document.getElementById('cerrarModalCumple');
                                var msgCumple = document.getElementById('msgCumple');
                                let esCumple = false;
                                if (data && data.nacimiento && typeof data.nacimiento === 'string' && data.nacimiento.length >= 10) {
                                    const hoy = new Date();
                                    const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
                                    const dia = hoy.getDate().toString().padStart(2, '0');
                                    const hoyMesDia = mes + '-' + dia;
                                    if (data.nacimiento.slice(5, 10) === hoyMesDia) {
                                        esCumple = true;
                                    }
                                }
                                if(btnCumple) {
                                    btnCumple.style.display = 'flex';
                                    if(esCumple) {
                                        btnCumple.classList.add('cumple-anim');
                                    } else {
                                        btnCumple.classList.remove('cumple-anim');
                                    }
                                    function mostrarCumpleContactos() {
                                                                // Mostrar notificaci√≥n de cumplea√±os de contactos al cargar la p√°gina
                                                                document.addEventListener('DOMContentLoaded', function() {
                                                                    var toastContactos = document.getElementById('toastNotiContactos');
                                                                    let contactos = [];
                                                                    try {
                                                                        contactos = JSON.parse(localStorage.getItem('contactos') || '[]');
                                                                    } catch(e) { contactos = []; }
                                                                    const hoy = new Date();
                                                                    const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
                                                                    const dia = hoy.getDate().toString().padStart(2, '0');
                                                                    const hoyMesDia = mes + '-' + dia;
                                                                    let cumpleaneros = contactos.filter(c => c.nacimiento && c.nacimiento.slice(5,10) === hoyMesDia);
                                                                    if (toastContactos && cumpleaneros.length > 0) {
                                                                        let nombres = cumpleaneros.map(c => {
                                                                            let nombreCompleto = c.nombre || '';
                                                                            if (c.apellidos) nombreCompleto += ' ' + c.apellidos;
                                                                            if (!nombreCompleto.trim()) nombreCompleto = (typeof t==='function'?t('contacto'):'Contacto');
                                                                            return nombreCompleto;
                                                                        }).join(', ');
                                                                        toastContactos.textContent = `${typeof t==='function'?t('feliz_cumple'):'¬°Feliz cumplea√±os'}: ${nombres}`;
                                                                        toastContactos.style.visibility = 'visible';
                                                                        toastContactos.style.opacity = '1';
                                                                        setTimeout(function(){
                                                                            toastContactos.style.opacity = '0';
                                                                            toastContactos.style.visibility = 'hidden';
                                                                        }, 3000);
                                                                    }
                                                                });
                                        // Mostrar notificaci√≥n sobre el bot√≥n flotante si hay contactos de cumplea√±os
                                        var toastContactos = document.getElementById('toastNotiContactos');
                                        let contactos = [];
                                        try {
                                            contactos = JSON.parse(localStorage.getItem('contactos') || '[]');
                                        } catch(e) { contactos = []; }
                                        const hoy = new Date();
                                        const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
                                        const dia = hoy.getDate().toString().padStart(2, '0');
                                        const hoyMesDia = mes + '-' + dia;
                                        let cumpleaneros = contactos.filter(c => c.nacimiento && c.nacimiento.slice(5,10) === hoyMesDia);
                                        if (toastContactos) {
                                            if (cumpleaneros.length > 0) {
                                                let nombres = cumpleaneros.map(c => {
                                                    let nombreCompleto = c.nombre || '';
                                                    if (c.apellidos) nombreCompleto += ' ' + c.apellidos;
                                                    if (!nombreCompleto.trim()) nombreCompleto = (typeof t==='function'?t('contacto'):'Contacto');
                                                    return nombreCompleto;
                                                }).join(', ');
                                                toastContactos.textContent = `${typeof t==='function'?t('feliz_cumple'):'¬°Feliz cumplea√±os'}: ${nombres}`;
                                                toastContactos.style.visibility = 'visible';
                                                toastContactos.style.opacity = '1';
                                                setTimeout(function(){
                                                    toastContactos.style.opacity = '0';
                                                    toastContactos.style.visibility = 'hidden';
                                                }, 3000);
                                            } else {
                                                toastContactos.style.opacity = '0';
                                                toastContactos.style.visibility = 'hidden';
                                            }
                                        }
                                        if(msgCumple && modalCumple && cerrarModalCumple) {
                                            // Buscar contactos que cumplen a√±os hoy
                                            let contactos = [];
                                            try {
                                                contactos = JSON.parse(localStorage.getItem('contactos') || '[]');
                                            } catch(e) { contactos = []; }
                                            const hoy = new Date();
                                            const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
                                            const dia = hoy.getDate().toString().padStart(2, '0');
                                            const hoyMesDia = mes + '-' + dia;
                                            let cumpleaneros = contactos.filter(c => c.nacimiento && c.nacimiento.slice(5,10) === hoyMesDia);
                                            if (cumpleaneros.length > 0) {
                                                let nombres = cumpleaneros.map(c => {
                                                    let nombreCompleto = c.nombre || '';
                                                    if (c.apellidos) nombreCompleto += ' ' + c.apellidos;
                                                    if (!nombreCompleto.trim()) nombreCompleto = (typeof t==='function'?t('contacto'):'Contacto');
                                                    let acciones = '';
                                                    if (c.whatsapp) {
                                                        let msg = encodeURIComponent(`¬°${typeof t==='function'?t('feliz_cumple'):'Feliz cumplea√±os'} ${nombreCompleto}!`);
                                                        let num = c.whatsapp.replace(/[^0-9]/g, '');
                                                        acciones += ` <a href='https://wa.me/${num}?text=${msg}' target='_blank' style='background:#25D366;color:#fff;padding:4px 10px;border-radius:8px;margin-left:6px;text-decoration:none;font-size:0.95em;'><i class='fa-brands fa-whatsapp'></i> WhatsApp</a>`;
                                                    }
                                                    if (c.email) {
                                                        let subject = encodeURIComponent(typeof t==='function'?t('feliz_cumple'):'Feliz cumplea√±os');
                                                        let body = encodeURIComponent(`¬°${typeof t==='function'?t('feliz_cumple'):'Feliz cumplea√±os'} ${nombreCompleto}!`);
                                                        acciones += ` <a href='mailto:${c.email}?subject=${subject}&body=${body}' style='background:#2176d2;color:#fff;padding:4px 10px;border-radius:8px;margin-left:6px;text-decoration:none;font-size:0.95em;'><i class='fa-solid fa-envelope'></i> Email</a>`;
                                                    }
                                                    return nombreCompleto + acciones;
                                                }).join('<br>');
                                                msgCumple.innerHTML = `<b>üéâ ${typeof t==='function'?t('feliz_cumple'):'¬°Feliz cumplea√±os'}:</b><br>${nombres}`;
                                            } else {
                                                msgCumple.innerHTML = `<b>üéâ ${typeof t==='function'?t('feliz_cumple'):'¬°Feliz cumplea√±os'}:</b><br>${typeof t==='function'?t('ningun_contacto_cumple'):'Ning√∫n contacto cumple a√±os hoy.'}`;
                                            }
                                            modalCumple.style.display = 'flex';
                                            cerrarModalCumple.onclick = function() {
                                                modalCumple.style.display = 'none';
                                            };
                                        }
                                    }
                                    btnCumple.onclick = function() {
                                        if(esCumple) {
                                            mostrarCumpleContactos();
                                        } else {
                                            // Mostrar toast sobre el bot√≥n si no hay cumplea√±os
                                            var toastContactos = document.getElementById('toastNotiContactos');
                                            let contactos = [];
                                            try {
                                                contactos = JSON.parse(localStorage.getItem('contactos') || '[]');
                                            } catch(e) { contactos = []; }
                                            const hoy = new Date();
                                            const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
                                            const dia = hoy.getDate().toString().padStart(2, '0');
                                            const hoyMesDia = mes + '-' + dia;
                                            let cumpleaneros = contactos.filter(c => c.nacimiento && c.nacimiento.slice(5,10) === hoyMesDia);
                                            if (toastContactos) {
                                                if (cumpleaneros.length === 0) {
                                                    toastContactos.textContent = typeof t==='function'?t('ningun_contacto_cumple'):'No hay cumplea√±os hoy';
                                                    toastContactos.style.visibility = 'visible';
                                                    toastContactos.style.opacity = '1';
                                                    setTimeout(function(){
                                                        toastContactos.style.opacity = '0';
                                                        toastContactos.style.visibility = 'hidden';
                                                    }, 2200);
                                                }
                                            }
                                        }
                                    };
                                    // Sincronizar si cambia localStorage en otra pesta√±a
                                    window.addEventListener('storage', function(e) {
                                        if(e.key === 'contactos') {
                                            if(document.getElementById('modalCumple') && document.getElementById('modalCumple').style.display === 'flex') {
                                                mostrarCumpleContactos();
                                            }
                                        }
                                    });
                                }
                            } catch(e) { /* Silenciar error */ }
                        }
                        if(document.readyState === 'loading') {
                            document.addEventListener('DOMContentLoaded', activarBotonCumple);
                        } else {
                            activarBotonCumple();
                        }
                    document.getElementById('btnConfig').onclick = function() {
                        alert(t('configuracion_alerta'));
                    };
            // Restaurar colores personalizados al cargar la p√°gina
            window.addEventListener('DOMContentLoaded', function() {
                const savedColors = JSON.parse(localStorage.getItem('customColors') || 'null');
                if (savedColors && savedColors.c1 && savedColors.c2) {
                    document.body.style.background = `linear-gradient(135deg, ${savedColors.c1} 0%, ${savedColors.c2} 100%)`;
                    document.getElementById('color1').value = savedColors.c1;
                    document.getElementById('color2').value = savedColors.c2;
                    // Sincronizar color de cabecera
                    document.querySelectorAll('.id-header').forEach(function(header){
                        header.style.background = savedColors.c1;
                    });
                } else {
                    document.querySelectorAll('.id-header').forEach(function(header){
                        header.style.background = '#2176d2';
                    });
                }
            });
            // Bot√≥n para abrir el modal de selecci√≥n de colores
            document.getElementById('btnTema').onclick = function() {
                const savedColors = JSON.parse(localStorage.getItem('customColors') || 'null');
                if (savedColors && savedColors.c1 && savedColors.c2) {
                    document.getElementById('color1').value = savedColors.c1;
                    document.getElementById('color2').value = savedColors.c2;
                }
                document.getElementById('colorModal').style.display = 'flex';
            };
            // Bot√≥n guardar colores
            document.getElementById('guardarColores').onclick = function() {
                const c1 = document.getElementById('color1').value;
                const c2 = document.getElementById('color2').value;
                document.body.style.background = `linear-gradient(135deg, ${c1} 0%, ${c2} 100%)`;
                localStorage.setItem('customColors', JSON.stringify({c1, c2}));
                // Sincronizar color de cabecera
                document.querySelectorAll('.id-header').forEach(function(header){
                    header.style.background = c1;
                });
                document.getElementById('colorModal').style.display = 'none';
            };
            // Bot√≥n cerrar modal sin guardar
            document.getElementById('cerrarColores').onclick = function() {
                document.getElementById('colorModal').style.display = 'none';
            };
            // Bot√≥n para modo oscuro (luna)
            document.getElementById('btnOscuro').onclick = function() {
                const body = document.body;
                if (!body.classList.contains('modo-oscuro')) {
                    body.classList.add('modo-oscuro');
                    body.style.background = '#181a1b';
                    document.querySelectorAll('.id-card, .id-card *').forEach(el => {
                        el.style.background = '#23272b';
                        el.style.color = '#eee';
                    });
                    // Cabecera en modo oscuro
                    document.querySelectorAll('.id-header').forEach(function(header){
                        header.style.background = '#23272b';
                    });
                } else {
                    body.classList.remove('modo-oscuro');
                    // Restaurar color personalizado o por defecto
                    const savedColors = JSON.parse(localStorage.getItem('customColors') || 'null');
                    if (savedColors && savedColors.c1) {
                        document.querySelectorAll('.id-header').forEach(function(header){
                            header.style.background = savedColors.c1;
                        });
                    } else {
                        document.querySelectorAll('.id-header').forEach(function(header){
                            header.style.background = '#2176d2';
                        });
                    }
                    body.style.background = 'linear-gradient(135deg, #2176d2 0%, #25D366 100%)';
                    document.querySelectorAll('.id-card, .id-card *').forEach(el => {
                        el.style.background = '';
                        el.style.color = '';
                    });
                }
            };
            // Bot√≥n para ir a la lista de contactos
            document.getElementById('btnVerContacto').onclick = function() {
                window.location.href = 'contactos.html';
            };
        // Compartir tarjeta con Web Share API
        // RECREAR BOT√ìN COMPARTIR Y SU EVENTO
        document.addEventListener('DOMContentLoaded', function() {
            // Insertar el bot√≥n Compartir en la barra de acciones
            var actionsBar = document.querySelector('.id-actions-bar');
            if (actionsBar && !document.getElementById('btnCompartir')) {
                var btn = document.createElement('button');
                btn.id = 'btnCompartir';
                btn.title = t('compartir') || 'Compartir';
                btn.innerHTML = '<i class="fa-solid fa-share-nodes"></i>';
                btn.style.background = '#25D366';
                btn.style.color = '#fff';
                btn.style.padding = '10px 14px';
                btn.style.borderRadius = '50%';
                btn.style.fontSize = '1.3em';
                btn.style.boxShadow = '0 2px 6px rgba(0,0,0,0.10)';
                btn.style.border = 'none';
                btn.style.cursor = 'pointer';
                btn.style.transition = 'background 0.2s';
                actionsBar.insertBefore(btn, actionsBar.children[2]);
                // Evento compartir
                btn.addEventListener('click', function() {
                    const data = JSON.parse(localStorage.getItem('profileData') || '{}');
                    let texto = '';
                    if(data.nombre) texto += t('nombre') + ': ' + data.nombre + '\n';
                    if(data.empresa) texto += t('empresa') + ': ' + data.empresa + '\n';
                    if(data.cargo) texto += t('cargo') + ': ' + data.cargo + '\n';
                    if(data.telefono) texto += t('telefono') + ': ' + data.telefono + '\n';
                    if(data.email) texto += t('email') + ': ' + data.email + '\n';
                    if(data.whatsapp) texto += t('whatsapp') + ': ' + data.whatsapp + '\n';
                    if(data.facebook) texto += t('facebook') + ': ' + data.facebook + '\n';
                    if(data.instagram) texto += t('instagram') + ': ' + data.instagram + '\n';
                    if(data.linkedin) texto += t('linkedin') + ': ' + data.linkedin + '\n';
                    var modal = document.getElementById('modalCompartir');
                    var content = document.getElementById('modalCompartirContent');
                    document.getElementById('txtDatosCompartir').value = texto;
                    modal.style.display = 'flex';
                    modal.style.alignItems = 'center';
                    modal.style.justifyContent = 'center';
                    if(content) content.focus();
                });
            }
        });
        // Cerrar modal compartir manual
        document.addEventListener('DOMContentLoaded', function() {
            var btnCerrarCompartir = document.getElementById('btnCerrarCompartir');
            var txtCompartirManual = document.getElementById('txtCompartirManual');
            if(btnCerrarCompartir) {
                btnCerrarCompartir.onclick = function() {
                    document.getElementById('modalCompartir').style.display = 'none';
                };
            }
            // Traducci√≥n din√°mica del modal compartir
            function traducirModalCompartir() {
                if(txtCompartirManual) txtCompartirManual.textContent = t('copiar_compartir') || 'Puedes copiar y compartir estos datos:';
                if(btnCerrarCompartir) btnCerrarCompartir.textContent = t('cerrar') || 'Cerrar';
            }
            traducirModalCompartir();
            window.addEventListener('storage', function(e) {
                if(e.key === 'lang') setTimeout(traducirModalCompartir, 100);
            });
        });
    // Sincronizar traducci√≥n del modal compartir si cambia el idioma global
    window.addEventListener('storage', function(e) {
        if(e.key === 'lang') setTimeout(function(){
            if(window.t && document.getElementById('btnCerrarCompartir')) {
                document.getElementById('btnCerrarCompartir').textContent = t('cerrar');
                var txtCompartirManual = document.getElementById('txtCompartirManual');
                if(txtCompartirManual) txtCompartirManual.textContent = t('copiar_compartir') || 'Puedes copiar y compartir estos datos:';
            }
        }, 100);
    });
    // Obtener datos de localStorage (puedes adaptar para recibir de un formulario)
    const data = JSON.parse(localStorage.getItem('profileData') || '{}');
    if(data) {
        if(data.empresa) document.getElementById('empresa').textContent = data.empresa;
        if(data.logo) {
            const logo = document.getElementById('logo');
            logo.src = data.logo;
            logo.style.display = 'block';
        }
        if(data.nombre) {
            const nombre = document.getElementById('nombre');
            nombre.textContent = data.nombre;
            nombre.style.display = 'block';
        }
        if(data.cargo) {
            const cargo = document.getElementById('cargo');
            cargo.textContent = data.cargo;
            cargo.style.display = 'block';
        }
        if(data.foto) {
            const foto = document.getElementById('foto');
            foto.src = data.foto;
            foto.style.display = 'block';
        }
        // Sincronizar traducci√≥n de t√≠tulos de iconos de redes sociales despu√©s de mostrarlos
        window.addEventListener('storage', function(e) {
            if(e.key === 'lang') setTimeout(traducirID, 100);
        });
        // QR vCard
        function escapeVCARD(str) {
            return (str||'').replace(/\n/g, '\\n').replace(/,/g, '\,').replace(/;/g, '\;');
        }
        // QR SOLO DATOS DE TEXTO (sin foto)
        let xSocial = [];
        if (data.whatsapp) xSocial.push(`X-SOCIALPROFILE;type=whatsapp:${escapeVCARD(data.whatsapp)}`);
        if (data.facebook) xSocial.push(`X-SOCIALPROFILE;type=facebook:${escapeVCARD(data.facebook)}`);
        if (data.instagram) xSocial.push(`X-SOCIALPROFILE;type=instagram:${escapeVCARD(data.instagram)}`);
        if (data.linkedin) xSocial.push(`X-SOCIALPROFILE;type=linkedin:${escapeVCARD(data.linkedin)}`);
        const vCardQR = [
            'BEGIN:VCARD',
            'VERSION:3.0',
            `FN:${escapeVCARD(data.nombre)}`,
            `ORG:${escapeVCARD(data.empresa)}`,
            `TITLE:${escapeVCARD(data.cargo)}`,
            data.telefono ? `TEL;TYPE=CELL:${escapeVCARD(data.telefono)}` : '',
            data.email ? `EMAIL;TYPE=INTERNET:${escapeVCARD(data.email)}` : '',
            ...xSocial,
            'END:VCARD'
        ].filter(Boolean).join('\n');
        document.getElementById('qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(vCardQR)}`;

        // vCard COMPLETA (con foto) para descarga
        let photoLine = '';
        if (data.foto && data.foto.startsWith('data:image/')) {
            const match = data.foto.match(/^data:(image\/(png|jpeg));base64,(.*)$/);
            if (match) {
                const mime = match[1];
                const b64 = match[3];
                photoLine = `PHOTO;ENCODING=b;TYPE=${mime.split('/')[1].toUpperCase()}:${b64}`;
            }
        }
        const vCardFull = [
            'BEGIN:VCARD',
            'VERSION:3.0',
            `FN:${escapeVCARD(data.nombre)}`,
            `ORG:${escapeVCARD(data.empresa)}`,
            `TITLE:${escapeVCARD(data.cargo)}`,
            data.telefono ? `TEL;TYPE=CELL:${escapeVCARD(data.telefono)}` : '',
            data.email ? `EMAIL;TYPE=INTERNET:${escapeVCARD(data.email)}` : '',
            ...xSocial,
            photoLine,
            'END:VCARD'
        ].filter(Boolean).join('\n');

        // Redes
        if(data.whatsapp) {
            const w = document.getElementById('whatsapp');
            w.href = 'https://wa.me/' + data.whatsapp;
            w.style.display = 'flex';
        }
        if(data.telefono) {
            const t = document.getElementById('telefono');
            t.href = 'tel:' + data.telefono;
            t.style.display = 'flex';
        }
        if(data.email) {
            const e = document.getElementById('email');
            e.href = 'mailto:' + data.email;
            e.style.display = 'flex';
        }
        if(data.facebook) {
            const f = document.getElementById('facebook');
            f.href = data.facebook;
            f.style.display = 'flex';
        }
        if(data.instagram) {
            const i = document.getElementById('instagram');
            i.href = data.instagram;
            i.style.display = 'flex';
        }
        if(data.linkedin) {
            const l = document.getElementById('linkedin');
            l.href = data.linkedin;
            l.style.display = 'flex';
        }
    }
    // Aplicar traducci√≥n de t√≠tulos de iconos de redes sociales despu√©s de mostrarlos
    traducirID();
    </script>
</body>

<!-- Modal de cumplea√±os en ID -->
<div id="modalCumpleID" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:3000;align-items:center;justify-content:center;">
    <div style="background:#fff;padding:32px 24px 24px 24px;border-radius:18px;box-shadow:0 8px 32px #0003;max-width:90vw;width:340px;text-align:center;position:relative;display:flex;flex-direction:column;align-items:center;">
        <div style="font-size:2.5em;color:#25D366;margin-bottom:10px;"><i class='fa-solid fa-cake-candles'></i></div>
        <div id="msgCumpleID" style="font-size:1.15em;margin-bottom:22px;"></div>
        <div id="accionesCumpleID"></div>
        <button id="cerrarModalCumpleID" style="background:#bbb;color:#333;padding:10px 22px;border:none;border-radius:8px;font-size:1em;cursor:pointer;margin-top:18px;">Cerrar</button>
    </div>
</div>
<script>

// Refuerzo: Mostrar modal de cumplea√±os en ID aunque el DOM tarde en cargar
(function mostrarModalCumpleID() {
    function mostrar() {
        const data = JSON.parse(localStorage.getItem('profileData') || '{}');
        if (data && data.nacimiento && typeof data.nacimiento === 'string' && data.nacimiento.length >= 10) {
            const hoy = new Date();
            const mes = (hoy.getMonth() + 1).toString().padStart(2, '0');
            const dia = hoy.getDate().toString().padStart(2, '0');
            const hoyMesDia = mes + '-' + dia;
            if (data.nacimiento.slice(5, 10) === hoyMesDia) {
                let mensaje = '';
                let nombre = data.nombre || '';
                if (typeof t === 'function') {
                    if (getLang && getLang() === 'en') {
                        mensaje = `üéâ <b>Today is the birthday of:</b><br>${nombre}`;
                    } else if (getLang && getLang() === 'fr') {
                        mensaje = `üéâ <b>Aujourd'hui c'est l'anniversaire de :</b><br>${nombre}`;
                    } else {
                        mensaje = `üéâ <b>Hoy es el cumplea√±os de:</b><br>${nombre}`;
                    }
                } else {
                    mensaje = `üéâ <b>Hoy es el cumplea√±os de:</b><br>${nombre}`;
                }
                var msgDiv = document.getElementById('msgCumpleID');
                var accionesDiv = document.getElementById('accionesCumpleID');
                var modal = document.getElementById('modalCumpleID');
                var btnCerrar = document.getElementById('cerrarModalCumpleID');
                if (msgDiv && accionesDiv && modal && btnCerrar) {
                    msgDiv.innerHTML = mensaje;
                    let acciones = '';
                    if(data.whatsapp) {
                        let msg = encodeURIComponent((typeof t==='function'?t('feliz_cumple'):'¬°Feliz cumplea√±os!') + ' ' + nombre);
                        let num = data.whatsapp.replace(/[^0-9]/g, '');
                        acciones += `<a href='https://wa.me/${num}?text=${msg}' target='_blank' style='background:#25D366;color:#fff;padding:10px 18px;border-radius:8px;margin:4px 2px;display:inline-block;text-decoration:none;font-weight:bold;font-size:1.1em;'><i class='fa-brands fa-whatsapp'></i> WhatsApp ${nombre}</a>`;
                    }
                    if(data.email) {
                        let subject = encodeURIComponent((typeof t==='function'?t('feliz_cumple'):'Feliz cumplea√±os'));
                        let body = encodeURIComponent((typeof t==='function'?t('feliz_cumple'):'Feliz cumplea√±os') + ' ' + nombre);
                        acciones += `<a href='mailto:${data.email}?subject=${subject}&body=${body}' style='background:#2176d2;color:#fff;padding:10px 18px;border-radius:8px;margin:4px 2px;display:inline-block;text-decoration:none;font-weight:bold;font-size:1.1em;'><i class='fa-solid fa-envelope'></i> Email ${nombre}</a>`;
                    }
                    accionesDiv.innerHTML = acciones;
                    modal.style.display = 'flex';
                    btnCerrar.onclick = function() {
                        modal.style.display = 'none';
                    };
                } else {
                    // Si el DOM a√∫n no est√° listo, reintentar
                    setTimeout(mostrar, 100);
                }
            }
        }
    }
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', mostrar);
    } else {
        setTimeout(mostrar, 50);
    }
})();
</script>

<!-- Bot√≥n flotante de Gu√≠a R√°pida -->

<!-- Selector de idioma flotante -->
<div id="selectorIdiomaFlotante" style="position:fixed;bottom:24px;right:24px;z-index:9999;background:#FFC107;border-radius:50px;box-shadow:0 4px 16px #0004;padding:8px 18px;display:flex;align-items:center;gap:8px;">
    <label for="idiomaFlotante" style="color:#fff;font-weight:bold;font-size:1.1em;margin:0;cursor:pointer;">üåê</label>
    <select id="idiomaFlotante" style="border:none;border-radius:8px;padding:6px 10px;font-size:1em;outline:none;">
        <option value="es">Espa√±ol</option>
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <!-- Agrega m√°s idiomas si es necesario -->
    </select>
</div>
<script>
    // Sincronizar selector con idioma actual y memorizar siempre el √∫ltimo idioma seleccionado
    function getLangActual() {
        return localStorage.getItem('lang') || 'es';
    }
    function setLangActual(lang) {
        localStorage.setItem('lang', lang);
        if(typeof t === 'function' && typeof traducirID === 'function') {
            traducirID();
        }
        window.dispatchEvent(new Event('storage'));
    }
    var sel = document.getElementById('idiomaFlotante');
    if(sel) {
        // Al cargar, aplicar el idioma guardado
        sel.value = getLangActual();
        if(typeof setLang === 'function') setLang(sel.value);
        sel.onchange = function() {
            setLangActual(this.value);
            if(typeof setLang === 'function') setLang(this.value);
        };
        // Actualizar el valor si cambia desde otro lugar
        window.addEventListener('storage', function() {
            sel.value = getLangActual();
            if(typeof setLang === 'function') setLang(sel.value);
        });
    }
</script>
</html>
